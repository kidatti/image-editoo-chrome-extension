# 画像編集アプリ (Chrome拡張機能)

画像を読み込んで図形や文字を追加できる Chrome 拡張機能です

## 機能

### 基本機能
- 画像ファイルの読み込み（ファイル選択またはドラッグ＆ドロップ）
- **クリップボードからの画像貼り付け（Ctrl+V / Cmd+V）**
- キャンバス上での図形描画
- **キャンバス上での直接テキスト入力**
- 編集した画像の保存
- **画像全体のクリア**

### 描画ツール
- **四角形**: ドラッグで四角形を描画
- **角丸四角形**: 角の丸い四角形（半径20px）
- **円・楕円**: 直感的なサイズ調整で楕円を描画
- **矢印**: 始点と終点を指定して矢印を描画
- **テキスト**: クリックした位置にテキストを直接入力
- **モザイク**: 選択範囲にモザイク効果を適用

### 編集機能
- **直接選択**: 図形をクリックして選択（青い破線でハイライト表示）
- **移動**: 選択された図形をドラッグで移動
- **リサイズ**: 選択された図形を8つのハンドルでサイズ変更
- **削除**: Delete/Backspaceキーで選択された図形を削除
- 選択されたオブジェクトの色変更
- 線の太さ（図形）またはフォントサイズ（テキスト）の調整
- リアルタイムでの変更反映

### ユーザーインターフェース
- **左サイドバー**: 縦配置のツールバー
- **色選択**: プリセットカラーパレット + カスタムカラーピッカー
- **線の太さ**: 2, 4, 6, 8, 10pxから選択
- **フォントサイズ**: 12, 16, 20, 24, 32pxから選択（テキスト用）
- **初期画面**: ファイル読み込みと貼り付けボタンを中央に配置


### 図形の描画
1. 左サイドバーから図形ツールを選択（四角形、角丸四角形、円、矢印）
2. キャンバス上でクリック＆ドラッグして図形を描画
3. **角丸四角形は20px半径の丸い角で描画**

### モザイク効果の適用
1. 左サイドバーの「モザイク」ツールを選択
2. キャンバス上でクリック＆ドラッグして範囲を指定
3. **選択した範囲にモザイク効果が適用**

### テキストの追加
1. 左サイドバーの「テキスト」ツールを選択
2. キャンバス上の任意の位置をクリック
3. **その場に入力ボックスが表示され、直接テキストを入力**
4. Enterキーで確定、Escapeキーでキャンセル

### オブジェクトの編集
1. 任意のツールで既存の図形をクリックして選択
2. 選択されたオブジェクトは青い破線で囲まれ、8つのリサイズハンドルが表示
3. **ドラッグで移動、ハンドルでサイズ変更**
4. Delete/Backspaceキーで削除

### 外観のカスタマイズ
- **色**: カラーボタンをクリックしてプリセットまたはカスタムカラーを選択
- **線の太さ/フォントサイズ**: 太さボタンをクリック
  - **図形選択時**: 線の太さ（2, 4, 6, 8, 10px）
  - **テキスト選択時**: フォントサイズ（12, 16, 20, 24, 32px）

### 画像の管理
- **クリアボタン**: 画像全体を削除（確認ダイアログあり）
- **保存ボタン**: 編集した画像をPNGファイルとしてダウンロード

## 技術仕様

### アーキテクチャ

アプリケーションは`ImageEditor`クラスを中心に構築されています：

- `setupCanvas()`: キャンバスの初期化
- `loadImage()`: ファイル読み込みと表示
- `handlePaste()`: クリップボード貼り付け処理
- `startDrawing()`, `draw()`, `stopDrawing()`: 図形描画制御
- `redraw()`: キャンバス全体の再描画と選択ハイライト
- `createInlineTextInput()`: キャンバス上での直接テキスト入力
- `selectShapeAt()`: 図形選択ロジック
- `moveShape()`, `resizeShape()`: オブジェクト操作
- `downloadImage()`: 保存機能

## ファイル構成

```
image_editoo/
├── index.html          # メインHTMLファイル
├── style.css           # スタイルシート
├── script.js           # JavaScript実装
├── CLAUDE.md           # プロジェクト説明
└── README.md           # このファイル
```
